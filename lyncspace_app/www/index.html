{% extends "templates/lync_web.html" %}

{% block page_content %}


<div class="hero-slider">

    <!-- STATIC BACKGROUND -->
    <div class="hs-bg"></div>

    {% for s in slides %}
    <div class="hs-slide {% if loop.first %}active{% endif %}">

        <!-- Text -->
        <div class="hs-overlay">
            <h2>
                {% if s.title_line_1 %}<span>{{ s.title_line_1 }}</span><br>{% endif %}
                {% if s.title_line_2 %}<span>{{ s.title_line_2 }}</span><br>{% endif %}
                {% if s.title_line_3 %}<span>{{ s.title_line_3 }}</span>{% endif %}
            </h2>

            <p>
                {% for line in s.description.split("\n") %}
                    {% if line.strip() %}
                    <span>{{ line }}</span><br>
                    {% endif %}
                {% endfor %}
            </p>
        </div>

        <!-- Media -->
        {% if s.media_type != "None" %}
        <div class="hs-media">
            {% if s.media_type == "Image" %}
                <img src="{{ s.image }}">
            {% else %}
                <iframe
                    src="https://www.youtube-nocookie.com/embed/{{ s.youtube_embed }}?rel=0&modestbranding=1&controls=1&iv_load_policy=3&fs=1"
                    allowfullscreen>
                </iframe>
            {% endif %}
        </div>
        {% endif %}
    </div>
    {% endfor %}

    <span class="hs-prev">❮</span>
    <span class="hs-next">❯</span>

    <div class="hs-dots">
        {% for s in slides %}
        <span class="{% if loop.first %}active{% endif %}" data-i="{{ loop.index0 }}"></span>
        {% endfor %}
    </div>
</div>




<!-- ================================
     TOP TITLE + SUBTEXT + SEPARATOR
================================ -->
<section class="container text-center mt-4">

    <h3 class="mb-2" style="font-weight:500; color:#333;">
        We will do all that we can, to live up to our client's desire
    </h3>

    <p class="text-center mb-4" style="max-width:850px; margin:auto; color:#666;">
        Driven through commitment, quality and innovation. We integrate honesty, integrity 
        and business ethics into all aspects of our business functioning.
    </p>

    <!-- separator line like original -->
    <hr style="border-top: 1px solid #e5e5e5; margin: 30px 0 50px;">
</section>


<!-- ================================
     STATIC FEATURE CARDS (3 boxes)
================================ -->
<section class="container pb-5">
    <div class="row text-center justify-content-center">

        <!-- Commitment -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="hom-card-1 p-4 h-100">
                <i class="fa-solid fa-handshake icon"></i>
                <h4 class="mb-3">Commitment</h4>
                <p>
                    We commit ourselves to work consistently to take steps towards your business goals.
                    We believe in individual commitment of our employees that makes your business more
                    stable than ever.
                </p>
            </div>
        </div>

        <!-- Quality -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="hom-card-1 p-4 h-100">
                <i class="fa-solid fa-award icon"></i>
                <h4 class="mb-3">Quality</h4>
                <p>
                    We strongly believe that the measure of who we are is defined by what we do.
                    That has always kept us delivering uncompromised quality with outstanding deliverables.
                </p>
            </div>
        </div>

        <!-- Innovation -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="hom-card-1 p-4 h-100">
                <i class="fa-solid fa-lightbulb icon"></i>
                <h4 class="mb-3">Innovation</h4>
                <p>
                    Innovation comes from people who enjoy their work. Our clients are served by 
                    creative individuals who think beyond boundaries and deliver long-lasting value.
                </p>
            </div>
        </div>

    </div>
</section>



<!-- ================================
     TECHNOLOGY LOGOS (DYNAMIC)
================================ -->
<section class="container text-center py-5">

    <h3 class="mb-2" style="font-weight:500;">Technology</h3>
    <div style="width:120px;height:3px;background:#27A5F9;margin:8px auto 35px;"></div>

    <div class="tech-carousel">
        <div class="tech-track">

            {% for t in tech_logos %}
            <div class="tech-item">
                <img src="{{ t.logo }}" alt="{{ t.tech_name }}">
            </div>
            {% endfor %}

            <!-- duplicated items for seamless looping -->
            {% for t in tech_logos %}
            <div class="tech-item">
                <img src="{{ t.logo }}" alt="{{ t.tech_name }}">
            </div>
            {% endfor %}

        </div>
    </div>

</section>














<!---------------------------------------------------------------->
<!-- JS to handle hero slider functionality -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const slides = Array.from(document.querySelectorAll(".hs-slide"));
    const dots = Array.from(document.querySelectorAll(".hs-dots .dot"));
    const prevBtn = document.querySelector(".hs-prev");
    const nextBtn = document.querySelector(".hs-next");
    const bg = document.querySelector(".hs-bg");

    const config = {
        autoplay: true,
        autoplayDelay: 6500,
        animDuration: 200  // ★ ULTRA-SLOW CINEMATIC (matches CSS 2s)
    };

    let index = slides.findIndex(s => s.classList.contains("active"));
    if (index < 0) index = 0;

    let autoTimer = null;
    let animating = false;
    let bgPos = 0;

    function setActive(newIndex, direction) {
        if (animating || newIndex === index) return;
        animating = true;

        const current = slides[index];
        const next = slides[newIndex];

        current.classList.add("exit");
        current.classList.remove("active");

        next.classList.remove("exit");
        next.classList.add("active");

        // Update dots
        dots.forEach(d => d.classList.remove("active"));
        if (dots[newIndex]) dots[newIndex].classList.add("active");

        // Background parallax with same slow easing
        const step = 50;
        if (direction === "next") bgPos += step;
        else bgPos -= step;

        bg.style.backgroundPosition = `calc(50% + ${bgPos}px) center`;

        setTimeout(() => {
            current.classList.remove("exit");
            animating = false;
            index = newIndex;
        }, config.animDuration + 50);
    }

    function next() {
        const ni = (index + 1) % slides.length;
        setActive(ni, "next");
    }

    function prev() {
        const ni = (index - 1 + slides.length) % slides.length;
        setActive(ni, "prev");
    }

    // Buttons
    nextBtn.addEventListener("click", () => { next(); resetAuto(); });
    prevBtn.addEventListener("click", () => { prev(); resetAuto(); });

    // Dots
    dots.forEach(d => d.addEventListener("click", e => {
        const i = Number(e.currentTarget.dataset.i);
        if (i > index) setActive(i, "next");
        else if (i < index) setActive(i, "prev");
        resetAuto();
    }));

    // Keyboard
    document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowRight") { next(); resetAuto(); }
        if (e.key === "ArrowLeft") { prev(); resetAuto(); }
    });

    // Autoplay
    function startAuto() {
        if (!config.autoplay) return;
        stopAuto();
        autoTimer = setInterval(next, config.autoplayDelay);
    }
    function stopAuto() {
        if (autoTimer) clearInterval(autoTimer);
        autoTimer = null;
    }
    function resetAuto() {
        stopAuto();
        startAuto();
    }

    // Hover pause
    const sliderEl = document.querySelector(".hero-slider");
    sliderEl.addEventListener("mouseenter", stopAuto);
    sliderEl.addEventListener("mouseleave", startAuto);

    // Touch swipe
    let touchStartX = 0;
    let touchEndX = 0;

    sliderEl.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
    }, { passive: true });

    sliderEl.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        const dx = touchStartX - touchEndX;

        if (Math.abs(dx) > 40) {
            if (dx > 0) next();
            else prev();
            resetAuto();
        }
    }, { passive: true });

    startAuto();
});
</script>







{% endblock %}